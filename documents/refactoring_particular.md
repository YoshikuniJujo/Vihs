このパッケージをリファクタリングする方針
========================================

データ構造
----------

### 保持するデータ

エディタなので、カーソルの位置とテキストデータを保存する
データ構造が必要。

### 必要な操作

おもに、挿入や削除が必要となる。

### 基本的な構造

Viライクなエディタなので、行の集まりと考える。

### 候補となる構造

#### リスト

zipper的な構造のリストであれば、カーソル位置での削除や、挿入は得意。
ただし、カーソルの移動等にO(n)時間(nは行数)がかかる。

#### 配列

配列は値の置き換えは得意だが、削除や挿入は苦手。
mutableなデータ構造を使うというコストに対する、ベネフィットに薄いため、
採用しない。

#### Data.Sequence.Seq

汎用的な、並びを表わすデータ構造。
いろいろな操作がO(log(n))で可能なので、大変優秀。
内部的にはfinger treeとして実装されている。
エディタであつかうデータなので、行数が多くなることはあっても、
1行の長さは、そこまで長くはならないという仮定のもと、
StringのSeqまたは、TextのSeqを採用するのが良さそう。
1行の長さも長大になることを想定するならSeq (Seq Char)とするべきだろう。

### 方針

とりあえず、簡単に実装できることから、
「zipper的なリストの、zipper的なリスト」として実装することにする。
ただし、長期的にはSeqを使用するように変更する可能性も考えて、
データ構造は隠蔽する。
「モジュール」の項目を参照のこと。

モジュール
----------

### データ構造の隠蔽

カーソル位置とテキストデータを保存するデータ構造を隠蔽するために、
これをモジュールとしてくくり出す。
適切に定義された、データ構造を完全に隠蔽できるインターフェースを定義する。
